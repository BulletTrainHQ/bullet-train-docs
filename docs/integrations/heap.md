---
title: Heap Analytics Integration
sidebar_label: Heap Analytics
hide_title: true
---

![Heap Analytics](/img/integrations/heap/heap-logo.svg)

You can integrate Flagsmith with Heap Analytics. The integration automatically sends the flag states for identified
users into Heap for cohort analysis, A/B testing and more. The process is as follows:

## Integration Setup

1. Get the Heap Project Environment ID for your Heap project from the Heap Manage Project page (Account > Manage >
   Projects > Environment > Get ID)
2. Add the ID key into Flagsmith (Integrations > Add Heap Integration)
3. All API calls generated by the Flagsmith SDK to the `Get Identity Flags` endpoint will send the a full set of flag
   evaluations for that particular user to Heap as an [`Event`](https://developers.heap.io/reference#track-1)

## How it Works

Identity flag values are passed into Heap.

Here's a demo user in Flagsmith:

<img src="/img/integrations/heap/heap-integration-2.png"/>

If we make the call to the Flagsmith API to get the flags for this user:

```bash
curl 'https://api.flagsmith.com/api/v1/identities/?identifier=development_user_123456' \
  -H 'x-environment-key: 8KzETdDeMY7xkqkSkY3Gsg'
```

And then take a look in our Heap dashboard, you can see the user and the flag data that has been sent to the Heap
platform.

<img src="/img/integrations/heap/heap-integration-1.png"/>

## Use Case

Once the integration has been set up, you can start segmenting your Heap identities based on the flags that they saw.
This means you can run AB tests driven by Flagsmith segments, and have the data show up automatically in Heap.

## Integration Notes

You have to identify users on both platforms in the same way. The Flagsmith `Identity ID` must be the same as the Heap
`identity`.
